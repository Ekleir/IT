__UPSERT__ UPDATE + INSERT, позволяет менять значение полей при добавлении с возникающим конфликтом.

если дописать в запросе __ON CONFLICT__(имя колонки) __DO NOTHING__, то при возникновении ошибки ничего не произойдёт. Работает только, если в таблице заданы ограничения через __CONSTRAINT__ на это поле.
![[Pasted image 20230701192101.png]]

Вместо DO NOTHING можно указать __DO UPDATE__, что обновит поле, которое необходимо убрать из конфликта, через __SET поле = EXCLUDED.поле__
![[Pasted image 20230701193043.png]]
Можно добавлять несколько полей для обновления , которые будут игнорировать конфликт id
![[Pasted image 20230701193930.png]]




